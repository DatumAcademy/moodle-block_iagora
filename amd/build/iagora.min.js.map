{"version":3,"file":"iagora.min.js","sources":["../src/iagora.js"],"sourcesContent":["import WebChat from 'botframework-webchat';\n/**\n * Initializes the chat with given parameters.\n * @param {Object} params - The initialization parameters.\n * @param {string} params.copiloturl - The copilot.\n * @param {string} params.categoryid - The category ID.\n * @param {string} params.chatId - The chat container ID.\n */\n\nexport const init = ({copiloturl}) => {\n    // eslint-disable-next-line no-console\n    console.log('Copilot URL:', copiloturl);\n    //initIagoraChat(chatId);\n};\n/**\n *\n * @param {string} chatId\n */\nexport function initIagoraChat(chatId) {\n const chatContainer = document.getElementById(chatId);\n\n        // Static token and directLine URL (example values)\n        const directLineURL = 'https://directline.botframework.com';\n        const token = chatId ;\n        try {\n            const directLine = WebChat.createDirectLine({domain: new URL(\"v3/directline\", directLineURL), token});\n\n            const subscription = directLine.connectionStatus$.subscribe({\n                next(value) {\n                    if (value === 2) {\n                        directLine\n                            .postActivity({\n                                localTimezone: Intl.DateTimeFormat().resolvedOptions().timeZone,\n                                locale: document.documentElement.lang || \"en\",\n                                name: \"startConversation\",\n                                type: \"event\"\n                            })\n                            .subscribe();\n\n                        subscription.unsubscribe();\n                    }\n                }\n            });\n\n            WebChat.renderWebChat({directLine, locale: document.documentElement.lang || \"en\"}, chatContainer);\n        } catch (error) {\n                    // eslint-disable-next-line no-console\n            console.error(\"Error initializing chat:\", error);\n            chatContainer.innerHTML = \"Failed to load chat. Please try again later.\";\n        }\n    }\n\n    export default {\n        init,\n        initIagoraChat\n    };"],"names":["init","_ref","copiloturl","console","log","initIagoraChat","chatId","chatContainer","document","getElementById","token","directLine","WebChat","createDirectLine","domain","URL","subscription","connectionStatus$","subscribe","next","value","postActivity","localTimezone","Intl","DateTimeFormat","resolvedOptions","timeZone","locale","documentElement","lang","name","type","unsubscribe","renderWebChat","error","innerHTML"],"mappings":"8UASaA,KAAOC,WAACC,WAACA,iBAElBC,QAAQC,IAAI,eAAgBF,sBAOhBG,eAAeC,cACxBC,cAAgBC,SAASC,eAAeH,QAIjCI,MAAQJ,iBAEJK,WAAaC,6BAAQC,iBAAiB,CAACC,OAAQ,IAAIC,IAAI,gBAH3C,uCAG4EL,MAAAA,QAExFM,aAAeL,WAAWM,kBAAkBC,UAAU,CACxDC,KAAKC,OACa,IAAVA,QACAT,WACKU,aAAa,CACVC,cAAeC,KAAKC,iBAAiBC,kBAAkBC,SACvDC,OAAQnB,SAASoB,gBAAgBC,MAAQ,KACzCC,KAAM,oBACNC,KAAM,UAETb,YAELF,aAAagB,+CAKjBC,cAAc,CAACtB,WAAAA,WAAYgB,OAAQnB,SAASoB,gBAAgBC,MAAQ,MAAOtB,eACrF,MAAO2B,OAEL/B,QAAQ+B,MAAM,2BAA4BA,OAC1C3B,cAAc4B,UAAY,gFAInB,CACXnC,KAAAA,KACAK,eAAAA"}