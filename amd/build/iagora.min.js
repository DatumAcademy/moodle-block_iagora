define("block_iagora/iagora",["exports","botframework-webchat"],(function(_exports,_botframeworkWebchat){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=_exports.default=void 0,_exports.initIagoraChat=initIagoraChat,_botframeworkWebchat=(obj=_botframeworkWebchat)&&obj.__esModule?obj:{default:obj};const init=_ref=>{let{copiloturl:copiloturl}=_ref;console.log("Copilot URL:",copiloturl)};function initIagoraChat(chatId){const chatContainer=document.getElementById(chatId),token=chatId;try{const directLine=_botframeworkWebchat.default.createDirectLine({domain:new URL("v3/directline","https://directline.botframework.com"),token:token}),subscription=directLine.connectionStatus$.subscribe({next(value){2===value&&(directLine.postActivity({localTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,locale:document.documentElement.lang||"en",name:"startConversation",type:"event"}).subscribe(),subscription.unsubscribe())}});_botframeworkWebchat.default.renderWebChat({directLine:directLine,locale:document.documentElement.lang||"en"},chatContainer)}catch(error){console.error("Error initializing chat:",error),chatContainer.innerHTML="Failed to load chat. Please try again later."}}_exports.init=init;var _default={init:init,initIagoraChat:initIagoraChat};return _exports.default=_default,_exports.default}));

//# sourceMappingURL=iagora.min.js.map